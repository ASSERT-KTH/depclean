plugins {
  id 'java'
  id 'groovy'
  id 'java-gradle-plugin'
  id 'maven-publish'
}

group 'se.kth.castor'
version '1.0-SNAPSHOT'

repositories {
  mavenLocal()
  mavenCentral()
}

dependencies {
  implementation gradleApi()
  testImplementation gradleTestKit()
  implementation('se.kth.castor:depclean-core:2.0.2-SNAPSHOT')
  implementation('se.kth.castor:depclean-maven-plugin:2.0.2-SNAPSHOT')
  implementation('org.codehaus.plexus:plexus-component-annotations:2.1.0')
  compileOnly('org.projectlombok:lombok:1.18.20')
  testImplementation('org.spockframework:spock-core:2.0-groovy-3.0')
  testImplementation('org.junit.jupiter:junit-jupiter-api:5.3.0')
  testImplementation('com.netflix.nebula:nebula-test:latest.release')
}

test {
  useJUnitPlatform()
}

gradlePlugin {
  plugins {
    demoPlugin {
      id = 'se.kth.castor.depclean-gradle-plugin'
      implementationClass = 'se.kth.depclean.DepCleanGradlePlugin'
    }
  }
}